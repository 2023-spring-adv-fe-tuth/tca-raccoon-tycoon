{"ast":null,"code":"import { marshall, unmarshall } from '@aws-sdk/util-dynamodb';\nexport const saveGameToCloud = async (email, appName, timestamp, gameResult) => {\n  const dynamoGame = {\n    pk: email,\n    sk: '${appName}#${timestamp}',\n    ts: timestamp,\n    user: email,\n    app: appName,\n    gsi1pk: appName,\n    gsi1sk: timestamp,\n    game: gameResult\n  };\n  console.log(\"Unmarshalled Game\", dynamoGame);\n  const marshalledGame = marshall(dynamoGame, {\n    removeUndefinedValues: true,\n    convertClassInstanceToMap: true\n  });\n  console.log(\"MarshalledGame\", marshalledGame);\n  const options = {\n    method: 'POST',\n    body: JSON.stringify({\n      TableName: \"tca-data\",\n      Item: marshalledGame\n    })\n  };\n  await fetch(\"https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data\", options);\n};\nexport const loadGamesFromCloud = async (email, appName) => {\n  const url = 'https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data/?user=${email}&game=${appName}';\n  console.log(\"url\", url);\n  const response = await fetch(url);\n  const data = await response.json();\n  console.log(\"Marshalled Response\", data);\n  const unmarshalledData = data.Items.map(x => unmarshall(x, {\n    convertEmptyValues: true\n  }));\n  console.log(\"Unmarshalled Response\", unmarshalledData);\n  const gameResults = unmarshalledData.map(x => x.game);\n  return gameResults;\n};","map":{"version":3,"names":["marshall","unmarshall","saveGameToCloud","email","appName","timestamp","gameResult","dynamoGame","pk","sk","ts","user","app","gsi1pk","gsi1sk","game","console","log","marshalledGame","removeUndefinedValues","convertClassInstanceToMap","options","method","body","JSON","stringify","TableName","Item","fetch","loadGamesFromCloud","url","response","data","json","unmarshalledData","Items","map","x","convertEmptyValues","gameResults"],"sources":["C:/Users/steph/OneDrive/Documents/GitHub/personal/tca-raccoon-tycoon/raccoon-tycoon-app/src/tca-cloud-api.js"],"sourcesContent":["import { marshall, unmarshall } from '@aws-sdk/util-dynamodb';\r\n\r\nexport const saveGameToCloud = async (email, appName, timestamp, gameResult) => {\r\n\r\n    const dynamoGame = {\r\n        pk: email\r\n        , sk: '${appName}#${timestamp}'\r\n\r\n        , ts: timestamp\r\n        , user: email\r\n        , app: appName\r\n\r\n        , gsi1pk: appName\r\n        , gsi1sk: timestamp\r\n\r\n        , game: gameResult\r\n    };\r\n\r\n    console.log(\"Unmarshalled Game\", dynamoGame);\r\n\r\n    const marshalledGame = marshall(\r\n        dynamoGame\r\n        , {\r\n            removeUndefinedValues: true\r\n            , convertClassInstanceToMap: true\r\n        }\r\n    );\r\n\r\n    console.log(\"MarshalledGame\", marshalledGame);\r\n\r\n    const options = {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            TableName: \"tca-data\",\r\n            Item: marshalledGame\r\n        })\r\n    };\r\n\r\n    await fetch(\r\n        \"https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data\"\r\n        , options\r\n    );\r\n};\r\n\r\nexport const loadGamesFromCloud = async (email,appName) => {\r\n\r\n    const url = 'https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data/?user=${email}&game=${appName}';\r\n\r\n    console.log(\"url\", url);\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    console.log(\"Marshalled Response\", data);\r\n\r\n    const unmarshalledData = data.Items.map(x => unmarshall(x, {convertEmptyValues: true}));\r\n\r\n    console.log(\"Unmarshalled Response\", unmarshalledData);\r\n\r\n    const gameResults = unmarshalledData.map(x => x.game);\r\n    return gameResults;\r\n};"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,UAAU,QAAQ,wBAAwB;AAE7D,OAAO,MAAMC,eAAe,GAAG,MAAAA,CAAOC,KAAK,EAAEC,OAAO,EAAEC,SAAS,EAAEC,UAAU,KAAK;EAE5E,MAAMC,UAAU,GAAG;IACfC,EAAE,EAAEL,KAAK;IACPM,EAAE,EAAE,yBAAyB;IAE7BC,EAAE,EAAEL,SAAS;IACbM,IAAI,EAAER,KAAK;IACXS,GAAG,EAAER,OAAO;IAEZS,MAAM,EAAET,OAAO;IACfU,MAAM,EAAET,SAAS;IAEjBU,IAAI,EAAET;EACZ,CAAC;EAEDU,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEV,UAAU,CAAC;EAE5C,MAAMW,cAAc,GAAGlB,QAAQ,CAC3BO,UAAU,EACR;IACEY,qBAAqB,EAAE,IAAI;IACzBC,yBAAyB,EAAE;EACjC,CAAC,CACJ;EAEDJ,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEC,cAAc,CAAC;EAE7C,MAAMG,OAAO,GAAG;IACZC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjBC,SAAS,EAAE,UAAU;MACrBC,IAAI,EAAET;IACV,CAAC;EACL,CAAC;EAED,MAAMU,KAAK,CACP,kEAAkE,EAChEP,OAAO,CACZ;AACL,CAAC;AAED,OAAO,MAAMQ,kBAAkB,GAAG,MAAAA,CAAO1B,KAAK,EAACC,OAAO,KAAK;EAEvD,MAAM0B,GAAG,GAAG,iGAAiG;EAE7Gd,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEa,GAAG,CAAC;EAEvB,MAAMC,QAAQ,GAAG,MAAMH,KAAK,CAACE,GAAG,CAAC;EACjC,MAAME,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAI,EAAE;EAElCjB,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEe,IAAI,CAAC;EAExC,MAAME,gBAAgB,GAAGF,IAAI,CAACG,KAAK,CAACC,GAAG,CAACC,CAAC,IAAIpC,UAAU,CAACoC,CAAC,EAAE;IAACC,kBAAkB,EAAE;EAAI,CAAC,CAAC,CAAC;EAEvFtB,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEiB,gBAAgB,CAAC;EAEtD,MAAMK,WAAW,GAAGL,gBAAgB,CAACE,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACtB,IAAI,CAAC;EACrD,OAAOwB,WAAW;AACtB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}