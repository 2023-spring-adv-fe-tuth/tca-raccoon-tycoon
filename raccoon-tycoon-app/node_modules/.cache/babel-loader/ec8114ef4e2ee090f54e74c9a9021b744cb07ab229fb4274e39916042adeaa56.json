{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/steph/OneDrive/Documents/GitHub/personal/tca-raccoon-tycoon/raccoon-tycoon-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/steph/OneDrive/Documents/GitHub/personal/tca-raccoon-tycoon/raccoon-tycoon-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{marshall,unmarshall}from'@aws-sdk/util-dynamodb';export var saveGameToCloud=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,appName,timestamp,gameResult){var dynamoGame,marshalledGame,options;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dynamoGame={pk:email,sk:'${appName}#${timestamp}',ts:timestamp,user:email,app:appName,gsi1pk:appName,gsi1sk:timestamp,game:gameResult};console.log(\"Unmarshalled Game\",dynamoGame);marshalledGame=marshall(dynamoGame,{removeUndefinedValues:true,convertClassInstanceToMap:true});console.log(\"MarshalledGame\",marshalledGame);options={method:'POST',body:JSON.stringify({TableName:\"tca-data\",Item:marshalledGame})};_context.next=7;return fetch(\"https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data\",options);case 7:case\"end\":return _context.stop();}},_callee);}));return function saveGameToCloud(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();export var loadGamesFromCloud=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,appName){var url,response,data,unmarshalledData,gameResults;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:url='https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data/?user=${email}&game=${appName}';console.log(\"url\",url);_context2.next=4;return fetch(url);case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:data=_context2.sent;console.log(\"Marshalled Response\",data);unmarshalledData=data.Items.map(function(x){return unmarshall(x,{convertEmptyValues:true});});console.log(\"Unmarshalled Response\",unmarshalledData);gameResults=unmarshalledData.map(function(x){return x.game;});return _context2.abrupt(\"return\",gameResults);case 13:case\"end\":return _context2.stop();}},_callee2);}));return function loadGamesFromCloud(_x5,_x6){return _ref2.apply(this,arguments);};}();","map":{"version":3,"names":["marshall","unmarshall","saveGameToCloud","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","appName","timestamp","gameResult","dynamoGame","marshalledGame","options","wrap","_callee$","_context","prev","next","pk","sk","ts","user","app","gsi1pk","gsi1sk","game","console","log","removeUndefinedValues","convertClassInstanceToMap","method","body","JSON","stringify","TableName","Item","fetch","stop","_x","_x2","_x3","_x4","apply","arguments","loadGamesFromCloud","_ref2","_callee2","url","response","data","unmarshalledData","gameResults","_callee2$","_context2","sent","json","Items","map","x","convertEmptyValues","abrupt","_x5","_x6"],"sources":["C:/Users/steph/OneDrive/Documents/GitHub/personal/tca-raccoon-tycoon/raccoon-tycoon-app/src/tca-cloud-api.js"],"sourcesContent":["import { marshall, unmarshall } from '@aws-sdk/util-dynamodb';\r\n\r\nexport const saveGameToCloud = async (email, appName, timestamp, gameResult) => {\r\n\r\n    const dynamoGame = {\r\n        pk: email\r\n        , sk: '${appName}#${timestamp}'\r\n\r\n        , ts: timestamp\r\n        , user: email\r\n        , app: appName\r\n\r\n        , gsi1pk: appName\r\n        , gsi1sk: timestamp\r\n\r\n        , game: gameResult\r\n    };\r\n\r\n    console.log(\"Unmarshalled Game\", dynamoGame);\r\n\r\n    const marshalledGame = marshall(\r\n        dynamoGame\r\n        , {\r\n            removeUndefinedValues: true\r\n            , convertClassInstanceToMap: true\r\n        }\r\n    );\r\n\r\n    console.log(\"MarshalledGame\", marshalledGame);\r\n\r\n    const options = {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            TableName: \"tca-data\",\r\n            Item: marshalledGame\r\n        })\r\n    };\r\n\r\n    await fetch(\r\n        \"https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data\"\r\n        , options\r\n    );\r\n};\r\n\r\nexport const loadGamesFromCloud = async (email,appName) => {\r\n\r\n    const url = 'https://32wop75hhc.execute-api.us-east-1.amazonaws.com/prod/data/?user=${email}&game=${appName}';\r\n\r\n    console.log(\"url\", url);\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    console.log(\"Marshalled Response\", data);\r\n\r\n    const unmarshalledData = data.Items.map(x => unmarshall(x, {convertEmptyValues: true}));\r\n\r\n    console.log(\"Unmarshalled Response\", unmarshalledData);\r\n\r\n    const gameResults = unmarshalledData.map(x => x.game);\r\n    return gameResults;\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}